<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/bootstrap-fileinput/css/fileinput.min.css">
    <style type="text/css">
        /*body {*/
            /*background-image: linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%);*/
        /*}*/
        .azure {
            background-image: linear-gradient(90deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%);
        }
        .upload-form{
            box-shadow: 2px 2px 26px grey;
        }
    </style>
    <title>主页</title>
</head>

<body class="azure">
    <div class="container">
        <div class="col-md-12">
            <form class="upload-form">
                <div class="form-group">
                    <input type="file" name="file" id="fileUpload" multiple class="file-loading" />
                </div>
            </form>
        </div>
    </div>

    </div>
    <footer class="navbar-fixed-bottom">
        <p class="text-center">Copyright ©2019 Youz</p>
    </footer>
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="/assets/bootstrap-fileinput/js/fileinput.min.js"></script>
    <script src="/assets/bootstrap-fileinput/js/locales/zh.js"></script>
    <script>
        $(function(){
            var oFileInput = new FileInput();
            oFileInput.Init("fileUpload", "");
        })

        var FileInput = function () {
            var oFile = new Object();

            //初始化fileinput控件（第一次初始化）
            oFile.Init = function(ctrlName, uploadUrl) {
                var control = $('#' + ctrlName);

                //初始化上传控件的样式
                control.fileinput({
                    language: 'zh', //设置语言
                    uploadUrl: '/upload', //上传的地址
                    allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
                    showUpload: true, //是否显示上传按钮
                    showCaption: false,//是否显示标题
                    browseClass: "btn btn-primary", //按钮样式
                    // initialPreviewDelimiter: ',',
                    maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小
                    maxFileCount: 10, //表示允许同时上传的最大文件个数
                    enctype: 'multipart/form-data',
                    validateInitialCount:true,
                    previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
                    msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
                });

                //导入文件上传完成之后的事件
                $("#txt_file").on("fileuploaded", function (event, data, previewId, index) {
                    $("#myModal").modal("hide");
                    var data = data.response.lstOrderImport;
                    if (data == undefined) {
                        toastr.error('文件格式类型不正确');
                        return;
                    }
                    //1.初始化表格
                    var oTable = new TableInit();
                    oTable.Init(data);
                    $("#div_startimport").show();
                });
            }
            return oFile;
        };
    </script>
</body>

</html>